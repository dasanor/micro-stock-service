language: node_js
node_js:
- '6'
services:
- mongodb
- docker
cache:
- yarn
before_install:
- cd src
- npm install -g yarn
install:
- yarn
before_script:
- sleep 15
script:
- npm run test-cov-lcov
after_success:
- cat ./lcov.info | ./node_modules/.bin/coveralls
- cd ..
- docker build -t $TRAVIS_REPO_SLUG:latest .
- docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
- docker push $TRAVIS_REPO_SLUG:latest;
notifications:
  slack:
    secure: aPyoXSu6VN634erAwxxtf2dSoOhH1PbZOIlADNjDXyCL3nairpxYzPt2p3cQg/lUVjDnAIZPVX4M+x9StVrFq9fCw4SwNRjJy0AhUr+YINHM87EQiC0hjb4dLXXiSupNSYgX2o2dqlgb34OXRsC7NDxITzDCG521SoHcMrSnjFlkzbJPn89t/fWvpHmeoaRsxZ3vql+RaPp5omzoD79XYVqF33jkxvIjYkHkpPsw7zNmbVnS71K8nX+a5vkh+ztFJS/tkgsTtuhCj8at6Wl0xbQuPEqQr09LU5Yf5cC8nMt949Z7BxM2jD9IQ39IwRznLOVHtGK6o9/AAiW3MGHVGo0L3oZScwMneylNRnpWda7dr8tyJMQc05xe1PuHw4ck+RoP6G47M8jxgOjaqNal7+esQzNpojkIkEUkRrw+4lW3NQ40LyNu7lVhSKaml28MGY/PgY3r1UPlBL1BuX5Gzq88as8x+uZMxDmJ2ABlme1dAVPjABCcS1L+GklwS6ErbUnwJB9GzEgcmx5HlBM922FHhGOhncL85uqj4Brr4mPtQ3awlYmTSXLUXOOaLQALk4mp4icsyvtWiEzRmMTfnM1nq7L1nY0r46VQbSU+h3CaZq9gw0YDua4JVlTd+IEIXHO7Qh2KAVb5dUaFRKC38plwGk+C4gE5jJdKmh4a1/k=
